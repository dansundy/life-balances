(function(e){var t,n,r,i,s={data:{career:{values:[]},family:{values:[]},health:{values:[]},love:{values:[]},social:{values:[]}}},o={leading_zeroes:function(e,t){var n=""+e;while(n.length<t)n="0"+n;return n}},u={init:function(){t=u.timeouts;n=u.settings;r=u.intervals;i=u.elements;s.today=f.get_date();f.init();u.checks();u.events()},timeouts:{},settings:{is_touch:"ontouchstart"in document.documentElement},intervals:{idle:0},elements:{no_storage:document.getElementById("no-storage"),done:document.getElementById("done"),update:e("#update")},checks:function(){if(typeof localStorage=="undefined"){n.storage=!1;i.no_storage.style.display="block"}else{n.storage=!0;var t=a.read("scales");if(t){s.data=t;e.each(s.data,function(t,n){var r=e("#update__"+t),i=n.values;r.val(i[i.length-1])});u.render(s.data);u.close_init()}else i.update.addClass("init")}},events:function(){e("nav ul li").click(function(){var t=e(this).html(),n=t.toLowerCase();e(".panel").addClass("transparent");e("#"+n).removeClass("transparent");e("#info-settings").addClass("active")});e(".close").click(function(){var t=e(this).parent();t.removeClass("active")});e(".scale").click(function(t){var n=t.currentTarget.id,r=n.replace("vis__","");i.update.addClass("active");u.start_idle();e("#update__"+r).focus()});e("#how-are-you").click(function(){i.update.addClass("active");u.start_idle()});e(document).bind("mousemove",function(){n.idle=0});i.update.find("select").focus(function(){n.idle=0});e(document).keydown(function(){n.idle=0});e("#update__form select").change(function(){var t={},n=this.id.replace("update__","");t[n]=e(this).val();u.collect(t);a.write(s.data);u.render(s.data)});document.getElementById("update__form").onsubmit=function(){e.each(s.data,function(e,t){if(t.values.length<1){s.data[e].values=[5];s.data[e].date=s.today;console.log(info);u.render(s.data)}});a.write(s.data);i.update.attr("class")==="init"&&u.close_init();return!1}},close_init:function(){i.update.fadeOut(500,function(){e(this).removeClass("init").find("p").hide();e(this).delay(500).show().find(".close").show()})},start_idle:function(){r.idle=setInterval(function(){n.idle++;if(n.idle>30){i.update.removeClass("active");n.idle=0;clearInterval(r.idle)}},1e3)},collect:function(t){e.each(t,function(e,t){if(s.today===s.data[e].date){s.data[e].values.pop();s.data[e].values.push(t);s.data[e].date=s.today}else{s.data[e].values.push(t);s.data[e].date=s.today}})},render:function(t){function n(e,t){return e/t*100}function r(t){var n=0;e.each(t,function(e,t){n+=parseInt(t,10)});var r=n/t.length;return r}function i(e){return(100-e)/2}e.each(t,function(t,s){var o="vis__"+t,u=s.values[s.values.length-1],a=n(u,5),f=n(r(s.values),5),l=e("#"+o);l.css({top:i(a)+"%",bottom:i(f)+"%"});l.find(".now span").html(Math.round(a*10)/10+"%");l.find(".average span").html(Math.round(f*10)/10+"%")})}},a={read:function(e){var t=JSON.parse(localStorage.getItem(e));return t},write:function(e,t){var n=t||"scales";localStorage.setItem(n,JSON.stringify(e))}},f={init:function(){f.update();setInterval(function(){f.update()},6e4)},get_date:function(){var e=new Date,t=e.getFullYear(),n=o.leading_zeroes(e.getMonth()+1,2),r=o.leading_zeroes(e.getDate(),2);return t+n+r},get_time_string:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();n=(n<10?"0":"")+n;r=(r<10?"0":"")+r;var i=t<12?"am":"pm";t=t>12?t-12:t;t=t===0?12:t;var s=t+":"+n+i;return s},update:function(){e("#time").html(f.get_time_string())}},l={get:function(){},set:function(){},remove:function(){}};u.init();e(window).load(function(){e("#loading").delay(1e3).fadeOut(200)})})(jQuery);